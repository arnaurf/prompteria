# MIDI PDF Prompter

A Python script to control PDF files using a MIDI device. This tool allows musicians or presenters to navigate through PDF hands-free using MIDI messages, for example a foot controller or a MIDI track generated by another device.

---

## üõ†Ô∏è Features

- ‚úÖ **Optimized for use with a Raspberry Pi**, USB MIDI controller, and a connected display ‚Äî perfect for live performances or practice setups.
- Hands-free PDF navigation using a MIDI device.
- Program Change MIDI messages to switch between PDF files.
- Note On MIDI messages to turn pages.
- Manual mode available via terminal input. (MIDI files)
- Lightweight setup using **Zathura** and **xdotool**.

> ‚ö†Ô∏è This project was designed and tested primarily on a Raspberry Pi. Other distributions or operating systems have not been tested.

---

## Requirements

### Python Dependencies

- **rtmidi**: For handling MIDI input.
- **pydbus**: For communicating with D-Bus services (Zathura).

Install them via pip:

```bash
pip install rtmidi pydbus
```

### System Packages

- **zathura**: A lightweight PDF viewer with D-Bus support.
- **xdotool**: A command-line tool to simulate keyboard input.

Install them on Debian/Ubuntu-based systems (including Raspberry Pi OS):

```bash
sudo apt-get install zathura xdotool
```

---

## Usage

### 1. Configure Your PDF Files

By default the program will search the PDFs paths in the file named `pdf_files.json`, in the same directory as the script. This file maps MIDI program change numbers to your PDF files. You can specify you own json with the parameter `-i` when calling the script.

Example `pdf_files.json`:

```json
{
  "1": "mysong-1.pdf",
  "2": "presentation-2.pdf",
  "3": "another-score.pdf",
  "4": "backup/mysong-1.pdf"
}
```

Place all your PDF files inside a folder named `pdf` in the same directory as the script, the paths in the json are relative to this folder.

---

### 2. Run the Script

Launch the script from the terminal:

```bash
python prompter-dbus.py
```

or

```bash
python prompter-dbus.py -i '/home/mark/prompter/setlists/setlist_1.json'
```

You will see a list of available MIDI ports. Select the one corresponding to your MIDI device.

---

### 3. Control with MIDI

- **Switch PDF file**: Send a MIDI Program Change message (e.g., Program Change #2 loads the file mapped to "2").
- **Turn page**: Send a MIDI Note On message for note 48 (which corresponds to C3).

---

### 4. Manual Control

You can also manually select a PDF file by typing its number in the terminal. Type `exit` to quit the application.

```bash
Enter the PDF number or 'exit' to quit: 2
# Opens presentation-2.pdf
```

---

## Final Notes

- Designed to work seamlessly with a **Raspberry Pi**, USB MIDI foot controller, and an external display.
- Ideal for musicians looking for a low-cost, portable solution to display and control sheet music or lyrics during performances.
- Compatibility with other platforms is not guaranteed.

---

## License

This project is licensed under the terms of the GNU General Public License v3.0 (GPLv3).
You are free to use, modify, and redistribute this software under the same license.

üëâ See the full license text here: https://www.gnu.org/licenses/gpl-3.0.html